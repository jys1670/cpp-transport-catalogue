\hypertarget{classio_1_1JsonReader}{}\doxysection{io\+::Json\+Reader Class Reference}
\label{classio_1_1JsonReader}\index{io::JsonReader@{io::JsonReader}}


Responsible for reading JSON input.  




{\ttfamily \#include $<$json\+\_\+reader.\+h$>$}

\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structio_1_1JsonReader_1_1CatalogueInserter}{Catalogue\+Inserter}}
\begin{DoxyCompactList}\small\item\em Functor used to process elements of \mbox{\hyperlink{classio_1_1JsonReader_a624290e3c4e5085f5d20f75ab770bcfb}{Json\+Reader\+::input\+\_\+queue\+\_\+}}. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structio_1_1JsonReader_1_1JsonInputParse}{Json\+Input\+Parse}}
\begin{DoxyCompactList}\small\item\em Functor used to parse and enqueue Transport\+Catalogue state-\/changing requests. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structio_1_1JsonReader_1_1JsonPrintParse}{Json\+Print\+Parse}}
\begin{DoxyCompactList}\small\item\em Functor used to parse and enqueue Transport\+Catalogue NON-\/state-\/changing requests. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes}{Request\+Types}}
\begin{DoxyCompactList}\small\item\em Known types of database state-\/changing requests. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classio_1_1JsonReader_ad2c0dd52c168c8c89e8a617472aa9b6b}{Json\+Reader}} (\mbox{\hyperlink{classcore_1_1TransportCatalogue}{data\+::\+Transport\+Catalogue}} \&catalogue, \mbox{\hyperlink{classio_1_1RequestHandler}{io\+::\+Request\+Handler}} \&req\+\_\+handler)
\begin{DoxyCompactList}\small\item\em Constructor for the class. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a9d990962cf65f3c42fe15c3a0399e375}\label{classio_1_1JsonReader_a9d990962cf65f3c42fe15c3a0399e375}} 
void {\bfseries Process\+Input} (const \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json\+::\+Dict}} \&doc\+\_\+map, \mbox{\hyperlink{namespaceio_a861a03ab529b37364d91fb4be59e15ed}{Output\+Format}} format=Output\+Format\+::\+Json)
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a1fd8e3af0a8957e5b86edb001f6a5be8}\label{classio_1_1JsonReader_a1fd8e3af0a8957e5b86edb001f6a5be8}} 
void {\bfseries Process\+Base\+Reqs} (const \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json\+::\+Dict}} \&doc\+\_\+map)
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a932230d5a52b2b1f10b822b96b785ddc}\label{classio_1_1JsonReader_a932230d5a52b2b1f10b822b96b785ddc}} 
void {\bfseries Enqueue\+Render\+Settings\+Update} (const \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json\+::\+Dict}} \&doc\+\_\+map)
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_aef4d2af0b70c4bc7495d64f97dcc4503}\label{classio_1_1JsonReader_aef4d2af0b70c4bc7495d64f97dcc4503}} 
void {\bfseries Enqueue\+Routing\+Settings\+Update} (const \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json\+::\+Dict}} \&doc\+\_\+map)
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a9573f9003a00da3542b6a5d780cdd820}\label{classio_1_1JsonReader_a9573f9003a00da3542b6a5d780cdd820}} 
void {\bfseries Enqueue\+Stat\+Reqs} (const \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json\+::\+Dict}} \&doc\+\_\+map)
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_ad96541103159db3169995be149dcfd67}\label{classio_1_1JsonReader_ad96541103159db3169995be149dcfd67}} 
void {\bfseries Parse\+Single\+Command} (const \mbox{\hyperlink{classio_1_1json_1_1Node}{json\+::\+Node}} \&node)
\begin{DoxyCompactList}\small\item\em Handles node that represents single known action defined in \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes}{Request\+Types}}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a1959b7568427a3b223aec7f464384dce}\label{classio_1_1JsonReader_a1959b7568427a3b223aec7f464384dce}} 
void {\bfseries Insert\+All\+Into\+Catalogue} ()
\begin{DoxyCompactList}\small\item\em Inserts all of new routes and stops parsed so far into \mbox{\hyperlink{classio_1_1JsonReader_a053a99f2bd71431a8ce1c3404260617b}{Json\+Reader\+::catalogue\+\_\+}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a989e2dcfb1fe053abef309a91eb405d1}\label{classio_1_1JsonReader_a989e2dcfb1fe053abef309a91eb405d1}} 
using {\bfseries Input\+Queue} = std\+::variant$<$ \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1StopInsert}{Request\+Types\+::\+Stop\+Insert}}, \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1StopLinkInsert}{Request\+Types\+::\+Stop\+Link\+Insert}}, \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1BusInsert}{Request\+Types\+::\+Bus\+Insert}} $>$
\begin{DoxyCompactList}\small\item\em Runtime polymorphic type capable of storing all kinds of \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes}{Request\+Types}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_aaf4b0ece34fc2677527d86d6cafe8528}\label{classio_1_1JsonReader_aaf4b0ece34fc2677527d86d6cafe8528}} 
void {\bfseries Clear} ()
\begin{DoxyCompactList}\small\item\em Clears all temporary JSON data, making \mbox{\hyperlink{classio_1_1JsonReader}{Json\+Reader}} ready to accept new document. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a053a99f2bd71431a8ce1c3404260617b}\label{classio_1_1JsonReader_a053a99f2bd71431a8ce1c3404260617b}} 
\mbox{\hyperlink{classcore_1_1TransportCatalogue}{data\+::\+Transport\+Catalogue}} \& {\bfseries catalogue\+\_\+}
\begin{DoxyCompactList}\small\item\em Database to be modified in place by insertion of new stops and routes. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classio_1_1JsonReader_ab764a646b4caab120d7905eb19ea343c}\label{classio_1_1JsonReader_ab764a646b4caab120d7905eb19ea343c}} 
\mbox{\hyperlink{classio_1_1RequestHandler}{io\+::\+Request\+Handler}} \& {\bfseries req\+\_\+handler\+\_\+}
\begin{DoxyCompactList}\small\item\em any non-\/state-\/changing requests are delegated here \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a873b795afb069bcaef2b4d04d31e211d}\label{classio_1_1JsonReader_a873b795afb069bcaef2b4d04d31e211d}} 
struct \mbox{\hyperlink{structio_1_1JsonReader_1_1JsonInputParse}{io\+::\+Json\+Reader\+::\+Json\+Input\+Parse}} $\ast$ {\bfseries this}
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a2e6bdc7cc535a98e827ef4d445ecef91}\label{classio_1_1JsonReader_a2e6bdc7cc535a98e827ef4d445ecef91}} 
struct \mbox{\hyperlink{structio_1_1JsonReader_1_1JsonPrintParse}{io\+::\+Json\+Reader\+::\+Json\+Print\+Parse}} {\bfseries req\+\_\+handler\+\_\+}
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a6bd9bd30e72351f2c050301dbccd2bcf}\label{classio_1_1JsonReader_a6bd9bd30e72351f2c050301dbccd2bcf}} 
struct \mbox{\hyperlink{structio_1_1JsonReader_1_1CatalogueInserter}{io\+::\+Json\+Reader\+::\+Catalogue\+Inserter}} $\ast$ {\bfseries this}
\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a624290e3c4e5085f5d20f75ab770bcfb}\label{classio_1_1JsonReader_a624290e3c4e5085f5d20f75ab770bcfb}} 
std\+::vector$<$ \mbox{\hyperlink{classio_1_1JsonReader_a989e2dcfb1fe053abef309a91eb405d1}{Input\+Queue}} $>$ {\bfseries input\+\_\+queue\+\_\+}
\begin{DoxyCompactList}\small\item\em Queue with all Transport\+Catalogue state-\/changing requests, should be sorted to satisfy \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes}{Request\+Types}} processing requirements. \end{DoxyCompactList}\item 
std\+::deque$<$ \mbox{\hyperlink{structio_1_1Stop}{io\+::\+Stop}} $>$ \mbox{\hyperlink{classio_1_1JsonReader_a06ebc7fccac10101cd1b14a317f0876f}{stops\+\_\+input\+\_\+queue\+\_\+}}
\begin{DoxyCompactList}\small\item\em Temporary storage of stops related information. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a12a7e3d56d1ff8617bd36d81d2e0aa0e}\label{classio_1_1JsonReader_a12a7e3d56d1ff8617bd36d81d2e0aa0e}} 
std\+::deque$<$ \mbox{\hyperlink{structio_1_1StopLink}{io\+::\+Stop\+Link}} $>$ {\bfseries stoplinks\+\_\+input\+\_\+queue\+\_\+}
\begin{DoxyCompactList}\small\item\em Temporary storage of stop links related information. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classio_1_1JsonReader_a5410ea5344c5563cf55755a777b07842}\label{classio_1_1JsonReader_a5410ea5344c5563cf55755a777b07842}} 
std\+::deque$<$ \mbox{\hyperlink{structio_1_1Bus}{io\+::\+Bus}} $>$ {\bfseries buses\+\_\+input\+\_\+queue\+\_\+}
\begin{DoxyCompactList}\small\item\em Temporary storage of buses related information. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Responsible for reading JSON input. 

This class is NOT meant to output anything, its main task is input information reading. If input is supposed to modify database, it is handled in place (new routes/stops directly inserted into Transport\+Catalogue). Other requests are delegated to Requests\+Handler (in uniform, JSON independent format), which will process everything once there is nothing left to insert into Transport\+Catalogue. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classio_1_1JsonReader_ad2c0dd52c168c8c89e8a617472aa9b6b}\label{classio_1_1JsonReader_ad2c0dd52c168c8c89e8a617472aa9b6b}} 
\index{io::JsonReader@{io::JsonReader}!JsonReader@{JsonReader}}
\index{JsonReader@{JsonReader}!io::JsonReader@{io::JsonReader}}
\doxysubsubsection{\texorpdfstring{JsonReader()}{JsonReader()}}
{\footnotesize\ttfamily io\+::\+Json\+Reader\+::\+Json\+Reader (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcore_1_1TransportCatalogue}{data\+::\+Transport\+Catalogue}} \&}]{catalogue,  }\item[{\mbox{\hyperlink{classio_1_1RequestHandler}{io\+::\+Request\+Handler}} \&}]{req\+\_\+handler }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Constructor for the class. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em inputstream} & stream from which JSON input will be read \\
\hline
\mbox{\texttt{ in}}  & {\em catalogue} & database to be modified in place by insertion of new stops and routes \\
\hline
\mbox{\texttt{ in}}  & {\em req\+\_\+handler} & requests that are not supposed to modify Transport\+Catalogue are delegated here \\
\hline
\end{DoxyParams}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classio_1_1JsonReader_a06ebc7fccac10101cd1b14a317f0876f}\label{classio_1_1JsonReader_a06ebc7fccac10101cd1b14a317f0876f}} 
\index{io::JsonReader@{io::JsonReader}!stops\_input\_queue\_@{stops\_input\_queue\_}}
\index{stops\_input\_queue\_@{stops\_input\_queue\_}!io::JsonReader@{io::JsonReader}}
\doxysubsubsection{\texorpdfstring{stops\_input\_queue\_}{stops\_input\_queue\_}}
{\footnotesize\ttfamily std\+::deque$<$\mbox{\hyperlink{structio_1_1Stop}{io\+::\+Stop}}$>$ io\+::\+Json\+Reader\+::stops\+\_\+input\+\_\+queue\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Temporary storage of stops related information. 

Adding new objects to the end/beginning of deque does not invalidate previously received pointers, which is why this container is used 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/user/\+Documents/cpp-\/transport-\/catalogue/transport-\/catalogue/\mbox{\hyperlink{json__reader_8h}{json\+\_\+reader.\+h}}\item 
/home/user/\+Documents/cpp-\/transport-\/catalogue/transport-\/catalogue/json\+\_\+reader.\+cpp\end{DoxyCompactItemize}
