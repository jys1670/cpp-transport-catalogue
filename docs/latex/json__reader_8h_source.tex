\hypertarget{json__reader_8h_source}{}\doxysection{json\+\_\+reader.\+h}
\label{json__reader_8h_source}\index{transport-\/catalogue/json\_reader.h@{transport-\/catalogue/json\_reader.h}}
\mbox{\hyperlink{json__reader_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <string\_view>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{domain_8h}{domain.h}}"{}}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{json_8h}{json.h}}"{}}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{map__renderer_8h}{map\_renderer.h}}"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{request__handler_8h}{request\_handler.h}}"{}}}
\DoxyCodeLine{20 }
\DoxyCodeLine{31 \textcolor{keyword}{class }\mbox{\hyperlink{classJsonReader}{JsonReader}} \{}
\DoxyCodeLine{32 \textcolor{keyword}{public}:}
\DoxyCodeLine{41   \textcolor{keyword}{explicit} \mbox{\hyperlink{classJsonReader_a34cc5f646705afb14ccfd0b978dceb34}{JsonReader}}(std::istream \&inputstream, \mbox{\hyperlink{classTransportCatalogue}{TransportCatalogue}} \&catalogue,}
\DoxyCodeLine{42                       \mbox{\hyperlink{classRequestHandler}{RequestHandler}} \&req\_handler)}
\DoxyCodeLine{43       : \mbox{\hyperlink{classJsonReader_afd8c479b2672037dc2b75f00c14ca350}{inputstream\_}}\{inputstream\}, \mbox{\hyperlink{classJsonReader_ac5b6130989b8d8fd2933c9618fbd71cb}{catalogue\_}}\{catalogue\}, \mbox{\hyperlink{classJsonReader_a05be9435345d58abe371f1c47af3745f}{req\_handler\_}}\{}
\DoxyCodeLine{44                                                               req\_handler\} \{\};}
\DoxyCodeLine{45 }
\DoxyCodeLine{52   \textcolor{keywordtype}{void} \mbox{\hyperlink{classJsonReader_a967abe0fef2defd4488a45a5435c9e16}{ProcessInput}}(\mbox{\hyperlink{structOutputFormat_1_1Json}{OutputFormat::Json}});}
\DoxyCodeLine{53 }
\DoxyCodeLine{55   \textcolor{keywordtype}{void} \mbox{\hyperlink{classJsonReader_a3a726e63dd92d2c8977c43c4261f0ec8}{ParseSingleCommand}}(\textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{56 }
\DoxyCodeLine{61   \textcolor{keywordtype}{void} \mbox{\hyperlink{classJsonReader_a361020e7183373683e7d1753d84b51a2}{InsertAllIntoCatalogue}}();}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{keyword}{private}:}
\DoxyCodeLine{65   std::istream \&\mbox{\hyperlink{classJsonReader_afd8c479b2672037dc2b75f00c14ca350}{inputstream\_}};}
\DoxyCodeLine{67   \mbox{\hyperlink{classTransportCatalogue}{TransportCatalogue}} \&\mbox{\hyperlink{classJsonReader_ac5b6130989b8d8fd2933c9618fbd71cb}{catalogue\_}};}
\DoxyCodeLine{69   \mbox{\hyperlink{classRequestHandler}{RequestHandler}} \&\mbox{\hyperlink{classJsonReader_a05be9435345d58abe371f1c47af3745f}{req\_handler\_}};}
\DoxyCodeLine{70 }
\DoxyCodeLine{75   \textcolor{keyword}{struct }\mbox{\hyperlink{structJsonReader_1_1RequestTypes}{RequestTypes}} \{}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{keyword}{struct }\mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1StopInsert}{StopInsert}} \{}
\DoxyCodeLine{78       \mbox{\hyperlink{structInputInfo_1_1Stop}{InputInfo::Stop}} *stop\_ptr;}
\DoxyCodeLine{79     \};}
\DoxyCodeLine{80 }
\DoxyCodeLine{81     \textcolor{keyword}{struct }\mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1StopLinkInsert}{StopLinkInsert}} \{}
\DoxyCodeLine{82       \mbox{\hyperlink{structInputInfo_1_1StopLink}{InputInfo::StopLink}} *stoplink\_ptr;}
\DoxyCodeLine{83     \};}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{keyword}{struct }\mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1BusInsert}{BusInsert}} \{}
\DoxyCodeLine{86       \mbox{\hyperlink{structInputInfo_1_1Bus}{InputInfo::Bus}} *bus\_ptr;}
\DoxyCodeLine{87     \};}
\DoxyCodeLine{88   \};}
\DoxyCodeLine{89 }
\DoxyCodeLine{91   \textcolor{keyword}{using} \mbox{\hyperlink{classJsonReader_af3391d88f15387e0cd6f5109aeccd26c}{InputQueue}} =}
\DoxyCodeLine{92       std::variant<\mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1StopInsert}{RequestTypes::StopInsert}}, \mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1StopLinkInsert}{RequestTypes::StopLinkInsert}},}
\DoxyCodeLine{93                    \mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1BusInsert}{RequestTypes::BusInsert}}>;}
\DoxyCodeLine{94 }
\DoxyCodeLine{99   \textcolor{keyword}{struct }\mbox{\hyperlink{structJsonReader_1_1JsonInputParse}{JsonInputParse}} \{}
\DoxyCodeLine{100   \textcolor{keyword}{public}:}
\DoxyCodeLine{101     \textcolor{keyword}{explicit} \mbox{\hyperlink{structJsonReader_1_1JsonInputParse}{JsonInputParse}}(\mbox{\hyperlink{classJsonReader}{JsonReader}} \&parent) : parent\_\{parent\} \{\};}
\DoxyCodeLine{102     \textcolor{keywordtype}{void} operator()(std::string\_view type, \textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{103 }
\DoxyCodeLine{104   \textcolor{keyword}{private}:}
\DoxyCodeLine{105     \textcolor{keyword}{using} FunctionPtr = void (\mbox{\hyperlink{structJsonReader_1_1JsonInputParse}{JsonInputParse}}::*)(\textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&);}
\DoxyCodeLine{108     \textcolor{keyword}{static} std::unordered\_map<std::string\_view, FunctionPtr> \mbox{\hyperlink{structJsonReader_1_1JsonInputParse_a068c4c47ee1dc3b4c9d99f5e8da887c9}{handlers\_}};}
\DoxyCodeLine{109     \mbox{\hyperlink{classJsonReader}{JsonReader}} \&parent\_;}
\DoxyCodeLine{110     \textcolor{keywordtype}{void} EnqueueBus(\textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{111     \textcolor{keywordtype}{void} EnqueueStop(\textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{112   \} json\_input\_parser\_\{*\textcolor{keyword}{this}\};}
\DoxyCodeLine{113 }
\DoxyCodeLine{118   \textcolor{keyword}{struct }\mbox{\hyperlink{structJsonReader_1_1JsonPrintParse}{JsonPrintParse}} \{}
\DoxyCodeLine{119   \textcolor{keyword}{public}:}
\DoxyCodeLine{120     \textcolor{keyword}{using} \mbox{\hyperlink{structRequestHandler_1_1RequestTypes}{RequestTypes}} = \mbox{\hyperlink{structRequestHandler_1_1RequestTypes}{RequestHandler::RequestTypes}};}
\DoxyCodeLine{121     \textcolor{keyword}{explicit} \mbox{\hyperlink{structJsonReader_1_1JsonPrintParse}{JsonPrintParse}}(\mbox{\hyperlink{classRequestHandler}{RequestHandler}} \&parent) : parent\_\{parent\} \{\};}
\DoxyCodeLine{122     \textcolor{keywordtype}{void} operator()(std::string\_view type, \textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{123 }
\DoxyCodeLine{124   \textcolor{keyword}{private}:}
\DoxyCodeLine{125     \textcolor{keyword}{using} FunctionPtr = void (\mbox{\hyperlink{structJsonReader_1_1JsonPrintParse}{JsonPrintParse}}::*)(\textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&);}
\DoxyCodeLine{126     \textcolor{keyword}{static} std::unordered\_map<std::string\_view, FunctionPtr> handlers\_;}
\DoxyCodeLine{127     \mbox{\hyperlink{classRequestHandler}{RequestHandler}} \&parent\_;}
\DoxyCodeLine{128     \textcolor{keywordtype}{void} EnqueueBus(\textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{129     \textcolor{keywordtype}{void} EnqueueStop(\textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{130     \textcolor{keywordtype}{void} EnqueueMapDraw(\textcolor{keyword}{const} \mbox{\hyperlink{classjson_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{131   \} json\_print\_parser\_\{\mbox{\hyperlink{classJsonReader_a05be9435345d58abe371f1c47af3745f}{req\_handler\_}}\};}
\DoxyCodeLine{132 }
\DoxyCodeLine{134   \textcolor{keyword}{struct }\mbox{\hyperlink{structJsonReader_1_1CatalogueInserter}{CatalogueInserter}} \{}
\DoxyCodeLine{135   \textcolor{keyword}{public}:}
\DoxyCodeLine{136     \textcolor{keyword}{explicit} \mbox{\hyperlink{structJsonReader_1_1CatalogueInserter}{CatalogueInserter}}(\mbox{\hyperlink{classJsonReader}{JsonReader}} \&parent) : parent\_\{parent\} \{\};}
\DoxyCodeLine{137     \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1StopInsert}{RequestTypes::StopInsert}} \&req);}
\DoxyCodeLine{138     \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1StopLinkInsert}{RequestTypes::StopLinkInsert}} \&req);}
\DoxyCodeLine{139     \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{structJsonReader_1_1RequestTypes_1_1BusInsert}{RequestTypes::BusInsert}} \&req);}
\DoxyCodeLine{140 }
\DoxyCodeLine{141   \textcolor{keyword}{private}:}
\DoxyCodeLine{142     \mbox{\hyperlink{classJsonReader}{JsonReader}} \&parent\_;}
\DoxyCodeLine{143   \} catalogue\_inserter\_\{*\textcolor{keyword}{this}\};}
\DoxyCodeLine{144 }
\DoxyCodeLine{149   std::vector<InputQueue> \mbox{\hyperlink{classJsonReader_a4128cb3e724a1d295b64da9e4824d3d0}{input\_queue\_}};}
\DoxyCodeLine{150 }
\DoxyCodeLine{157   std::deque<InputInfo::Stop> \mbox{\hyperlink{classJsonReader_a6c4ff8f1c0544ccd12947e985063faa7}{stops\_input\_queue\_}};}
\DoxyCodeLine{158 }
\DoxyCodeLine{160   std::deque<InputInfo::StopLink> \mbox{\hyperlink{classJsonReader_a76c5731bf436f81703b3e8f9395124a0}{stoplinks\_input\_queue\_}};}
\DoxyCodeLine{161 }
\DoxyCodeLine{163   std::deque<InputInfo::Bus> \mbox{\hyperlink{classJsonReader_ac60eb31813cdfc95cdac717e50621609}{buses\_input\_queue\_}};}
\DoxyCodeLine{164 }
\DoxyCodeLine{169   \textcolor{keywordtype}{void} \mbox{\hyperlink{classJsonReader_a3a724bf5780d4e3d3825459ab3862085}{Clear}}();}
\DoxyCodeLine{170 \};}

\end{DoxyCode}
