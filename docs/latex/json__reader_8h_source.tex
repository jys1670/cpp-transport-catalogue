\hypertarget{json__reader_8h_source}{}\doxysection{json\+\_\+reader.\+h}
\label{json__reader_8h_source}\index{/home/user/Documents/cpp-\/transport-\/catalogue/transport-\/catalogue/json\_reader.h@{/home/user/Documents/cpp-\/transport-\/catalogue/transport-\/catalogue/json\_reader.h}}
\mbox{\hyperlink{json__reader_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <string\_view>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{domain_8h}{domain.h}}"{}}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{json_8h}{json.h}}"{}}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{map__renderer_8h}{map\_renderer.h}}"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{request__handler_8h}{request\_handler.h}}"{}}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceio}{io}} \{}
\DoxyCodeLine{22 }
\DoxyCodeLine{33 \textcolor{keyword}{class }\mbox{\hyperlink{classio_1_1JsonReader}{JsonReader}} \{}
\DoxyCodeLine{34 \textcolor{keyword}{public}:}
\DoxyCodeLine{43   \textcolor{keyword}{explicit} \mbox{\hyperlink{classio_1_1JsonReader_ad2c0dd52c168c8c89e8a617472aa9b6b}{JsonReader}}(\mbox{\hyperlink{classcore_1_1TransportCatalogue}{core::TransportCatalogue}} \&catalogue,}
\DoxyCodeLine{44                       \mbox{\hyperlink{classio_1_1RequestHandler}{io::RequestHandler}} \&req\_handler)}
\DoxyCodeLine{45       : \mbox{\hyperlink{classio_1_1JsonReader_a053a99f2bd71431a8ce1c3404260617b}{catalogue\_}}\{catalogue\}, \mbox{\hyperlink{classio_1_1JsonReader_ab764a646b4caab120d7905eb19ea343c}{req\_handler\_}}\{req\_handler\} \{\};}
\DoxyCodeLine{46 }
\DoxyCodeLine{47   \textcolor{keywordtype}{void} ProcessInput(\textcolor{keyword}{const} \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json::Dict}} \&doc\_map,}
\DoxyCodeLine{48                     \mbox{\hyperlink{namespaceio_a861a03ab529b37364d91fb4be59e15ed}{OutputFormat}} format = OutputFormat::Json);}
\DoxyCodeLine{49   \textcolor{keywordtype}{void} ProcessBaseReqs(\textcolor{keyword}{const} \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json::Dict}} \&doc\_map);}
\DoxyCodeLine{50   \textcolor{keywordtype}{void} EnqueueRenderSettingsUpdate(\textcolor{keyword}{const} \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json::Dict}} \&doc\_map);}
\DoxyCodeLine{51   \textcolor{keywordtype}{void} EnqueueRoutingSettingsUpdate(\textcolor{keyword}{const} \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json::Dict}} \&doc\_map);}
\DoxyCodeLine{52   \textcolor{keywordtype}{void} EnqueueStatReqs(\textcolor{keyword}{const} \mbox{\hyperlink{namespaceio_1_1json_afef700639d081056b62d37f480e79f20}{json::Dict}} \&doc\_map);}
\DoxyCodeLine{53 }
\DoxyCodeLine{55   \textcolor{keywordtype}{void} \mbox{\hyperlink{classio_1_1JsonReader_ad96541103159db3169995be149dcfd67}{ParseSingleCommand}}(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{56 }
\DoxyCodeLine{61   \textcolor{keywordtype}{void} \mbox{\hyperlink{classio_1_1JsonReader_a1959b7568427a3b223aec7f464384dce}{InsertAllIntoCatalogue}}();}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{keyword}{private}:}
\DoxyCodeLine{65   \mbox{\hyperlink{classcore_1_1TransportCatalogue}{core::TransportCatalogue}} \&\mbox{\hyperlink{classio_1_1JsonReader_a053a99f2bd71431a8ce1c3404260617b}{catalogue\_}};}
\DoxyCodeLine{67   \mbox{\hyperlink{classio_1_1RequestHandler}{io::RequestHandler}} \&\mbox{\hyperlink{classio_1_1JsonReader_ab764a646b4caab120d7905eb19ea343c}{req\_handler\_}};}
\DoxyCodeLine{68 }
\DoxyCodeLine{73   \textcolor{keyword}{struct }\mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes}{RequestTypes}} \{}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     \textcolor{keyword}{struct }\mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1StopInsert}{StopInsert}} \{}
\DoxyCodeLine{76       \mbox{\hyperlink{structio_1_1Stop}{io::Stop}} *stop\_ptr;}
\DoxyCodeLine{77     \};}
\DoxyCodeLine{78 }
\DoxyCodeLine{79     \textcolor{keyword}{struct }\mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1StopLinkInsert}{StopLinkInsert}} \{}
\DoxyCodeLine{80       \mbox{\hyperlink{structio_1_1StopLink}{io::StopLink}} *stoplink\_ptr;}
\DoxyCodeLine{81     \};}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \textcolor{keyword}{struct }\mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1BusInsert}{BusInsert}} \{}
\DoxyCodeLine{84       \mbox{\hyperlink{structio_1_1Bus}{io::Bus}} *bus\_ptr;}
\DoxyCodeLine{85     \};}
\DoxyCodeLine{86   \};}
\DoxyCodeLine{87 }
\DoxyCodeLine{89   \textcolor{keyword}{using }\mbox{\hyperlink{classio_1_1JsonReader_a989e2dcfb1fe053abef309a91eb405d1}{InputQueue}} =}
\DoxyCodeLine{90       std::variant<\mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1StopInsert}{RequestTypes::StopInsert}}, \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1StopLinkInsert}{RequestTypes::StopLinkInsert}},}
\DoxyCodeLine{91                    \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1BusInsert}{RequestTypes::BusInsert}}>;}
\DoxyCodeLine{92 }
\DoxyCodeLine{97   \textcolor{keyword}{struct }\mbox{\hyperlink{structio_1_1JsonReader_1_1JsonInputParse}{JsonInputParse}} \{}
\DoxyCodeLine{98   \textcolor{keyword}{public}:}
\DoxyCodeLine{99     \textcolor{keyword}{explicit} \mbox{\hyperlink{structio_1_1JsonReader_1_1JsonInputParse}{JsonInputParse}}(\mbox{\hyperlink{classio_1_1JsonReader}{JsonReader}} \&parent) : parent\_\{parent\} \{\};}
\DoxyCodeLine{100     \textcolor{keywordtype}{void} operator()(std::string\_view type, \textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{101 }
\DoxyCodeLine{102   \textcolor{keyword}{private}:}
\DoxyCodeLine{103     \textcolor{keyword}{using }FunctionPtr = void (\mbox{\hyperlink{structio_1_1JsonReader_1_1JsonInputParse}{JsonInputParse}}::*)(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&);}
\DoxyCodeLine{106     \textcolor{keyword}{static} std::unordered\_map<std::string\_view, FunctionPtr> \mbox{\hyperlink{structio_1_1JsonReader_1_1JsonInputParse_ad4f5b3b66dcb2e1ae607eb6621e4885e}{handlers\_}};}
\DoxyCodeLine{107     \mbox{\hyperlink{classio_1_1JsonReader}{JsonReader}} \&parent\_;}
\DoxyCodeLine{108     \textcolor{keywordtype}{void} EnqueueBus(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{109     \textcolor{keywordtype}{void} EnqueueStop(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{110   \} json\_input\_parser\_\{*\textcolor{keyword}{this}\};}
\DoxyCodeLine{111 }
\DoxyCodeLine{116   \textcolor{keyword}{struct }\mbox{\hyperlink{structio_1_1JsonReader_1_1JsonPrintParse}{JsonPrintParse}} \{}
\DoxyCodeLine{117   \textcolor{keyword}{public}:}
\DoxyCodeLine{118     \textcolor{keyword}{using }\mbox{\hyperlink{structio_1_1RequestHandler_1_1RequestTypes}{RequestTypes}} = \mbox{\hyperlink{structio_1_1RequestHandler_1_1RequestTypes}{io::RequestHandler::RequestTypes}};}
\DoxyCodeLine{119     \textcolor{keyword}{explicit} \mbox{\hyperlink{structio_1_1JsonReader_1_1JsonPrintParse}{JsonPrintParse}}(\mbox{\hyperlink{classio_1_1RequestHandler}{io::RequestHandler}} \&parent) : parent\_\{parent\} \{\};}
\DoxyCodeLine{120     \textcolor{keywordtype}{void} operator()(std::string\_view type, \textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{121 }
\DoxyCodeLine{122   \textcolor{keyword}{private}:}
\DoxyCodeLine{123     \textcolor{keyword}{using }FunctionPtr = void (\mbox{\hyperlink{structio_1_1JsonReader_1_1JsonPrintParse}{JsonPrintParse}}::*)(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&);}
\DoxyCodeLine{124     \textcolor{keyword}{static} std::unordered\_map<std::string\_view, FunctionPtr> handlers\_;}
\DoxyCodeLine{125     \mbox{\hyperlink{classio_1_1RequestHandler}{io::RequestHandler}} \&parent\_;}
\DoxyCodeLine{126     \textcolor{keywordtype}{void} EnqueueBus(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{127     \textcolor{keywordtype}{void} EnqueueStop(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{128     \textcolor{keywordtype}{void} EnqueueMapDraw(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{129     \textcolor{keywordtype}{void} EnqueueRoute(\textcolor{keyword}{const} \mbox{\hyperlink{classio_1_1json_1_1Node}{json::Node}} \&node);}
\DoxyCodeLine{130   \} json\_print\_parser\_\{\mbox{\hyperlink{classio_1_1JsonReader_ab764a646b4caab120d7905eb19ea343c}{req\_handler\_}}\};}
\DoxyCodeLine{131 }
\DoxyCodeLine{133   \textcolor{keyword}{struct }\mbox{\hyperlink{structio_1_1JsonReader_1_1CatalogueInserter}{CatalogueInserter}} \{}
\DoxyCodeLine{134   \textcolor{keyword}{public}:}
\DoxyCodeLine{135     \textcolor{keyword}{explicit} \mbox{\hyperlink{structio_1_1JsonReader_1_1CatalogueInserter}{CatalogueInserter}}(\mbox{\hyperlink{classio_1_1JsonReader}{JsonReader}} \&parent) : parent\_\{parent\} \{\};}
\DoxyCodeLine{136     \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1StopInsert}{RequestTypes::StopInsert}} \&req);}
\DoxyCodeLine{137     \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1StopLinkInsert}{RequestTypes::StopLinkInsert}} \&req);}
\DoxyCodeLine{138     \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{structio_1_1JsonReader_1_1RequestTypes_1_1BusInsert}{RequestTypes::BusInsert}} \&req);}
\DoxyCodeLine{139 }
\DoxyCodeLine{140   \textcolor{keyword}{private}:}
\DoxyCodeLine{141     \mbox{\hyperlink{classio_1_1JsonReader}{JsonReader}} \&parent\_;}
\DoxyCodeLine{142   \} catalogue\_inserter\_\{*\textcolor{keyword}{this}\};}
\DoxyCodeLine{143 }
\DoxyCodeLine{148   std::vector<InputQueue> \mbox{\hyperlink{classio_1_1JsonReader_a624290e3c4e5085f5d20f75ab770bcfb}{input\_queue\_}};}
\DoxyCodeLine{149 }
\DoxyCodeLine{156   std::deque<io::Stop> \mbox{\hyperlink{classio_1_1JsonReader_a06ebc7fccac10101cd1b14a317f0876f}{stops\_input\_queue\_}};}
\DoxyCodeLine{157 }
\DoxyCodeLine{159   std::deque<io::StopLink> \mbox{\hyperlink{classio_1_1JsonReader_a12a7e3d56d1ff8617bd36d81d2e0aa0e}{stoplinks\_input\_queue\_}};}
\DoxyCodeLine{160 }
\DoxyCodeLine{162   std::deque<io::Bus> \mbox{\hyperlink{classio_1_1JsonReader_a5410ea5344c5563cf55755a777b07842}{buses\_input\_queue\_}};}
\DoxyCodeLine{163 }
\DoxyCodeLine{168   \textcolor{keywordtype}{void} \mbox{\hyperlink{classio_1_1JsonReader_aaf4b0ece34fc2677527d86d6cafe8528}{Clear}}();}
\DoxyCodeLine{169 \};}
\DoxyCodeLine{170 }
\DoxyCodeLine{171 \} \textcolor{comment}{// namespace io}}

\end{DoxyCode}
